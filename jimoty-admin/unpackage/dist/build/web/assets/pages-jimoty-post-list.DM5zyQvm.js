import{_ as e,Y as t,n as a,r as n,a as r,c as l,w as o,i,b as s,d as g,e as c,f as d,o as h,g as u,j as f,k as p,l as C,F as _,I as y,m,t as b}from"./index-DvwuWHCT.js";import{_ as S}from"./download-excel.DZLKoZwF.js";import{_ as x}from"./uni-dateformat.DJj25wzG.js";import{_ as F}from"./uni-pagination.DcoG_qbw.js";import{_ as w}from"./unicloud-db.BruyzEc-.js";import{e as T,f as k}from"./jimoty-post.OinjbDkH.js";const v=t.database(),D=[],$={ascending:"asc",descending:"desc"};const z=e({data:()=>({collectionList:"jimoty-post",query:"",where:"",orderby:"",orderByFieldName:"",selectedIndexs:[],options:{pageSize:20,pageCurrent:1,filterData:{},...T},imageStyles:{width:64,height:64},exportExcel:{filename:"jimoty-post.xls",type:"xls",fields:{"发布者":"userId","类目":"type","类别":"category","图片":"photos","地理位置":"location","招募年龄":"recruitAge","标题":"noteTitle","正文":"mainText","公司名":"companyName","工资形式":"payrollForm","薪资":"salary","工资补充":"salarySupplement","交通":"traffic","工作时间":"workTime","工作地点":"workPosition","电话":"phone","雇佣形式":"employeeForm","性别":"sex","年龄":"age","绝育手术":"sterOperation","疫苗接种":"vaccinelnoculation","投稿理由":"releaseReason","支付方式":"payMethod","商品价格":"postPrice","帖子状态":"status","逻辑删除":"delete","浏览数":"browse","权重":"weight","收藏数":"collect","高亮":"hightLight",create_date:"create_date",update_date:"update_date"}},exportExcelData:[]}),onLoad(){this._filter={}},onReady(){this.$refs.udb.loadData()},methods:{onqueryload(e){this.exportExcelData=e},getWhere(){const e=this.query.trim();if(!e)return"";const t=new RegExp(e,"i");return D.map((e=>t+".test("+e+")")).join(" || ")},search(){const e=this.getWhere();this.where=e,this.$nextTick((()=>{this.loadData()}))},loadData(e=!0){this.$refs.udb.loadData({clear:e})},onPageChanged(e){this.selectedIndexs.length=0,this.$refs.table.clearSelection(),this.$refs.udb.loadData({current:e.current})},navigateTo(e,t){a({url:e,events:{refreshData:()=>{this.loadData(t)}}})},selectedItems(){var e=this.$refs.udb.dataList;return this.selectedIndexs.map((t=>e[t]._id))},delTable(){this.$refs.udb.remove(this.selectedItems(),{success:e=>{this.$refs.table.clearSelection()}})},selectionChange(e){this.selectedIndexs=e.detail.index},confirmDelete(e,a){this.$refs.udb.remove(e,{success:async e=>{var n;await(null==(n=t)?void 0:n.deleteFile({fileList:[...a],success:e=>{console.log("文件删除成功",e)},fail:e=>{console.error("文件删除失败",e)},complete(){console.error("文件删除失败",err)}})),this.$refs.table.clearSelection()}})},sortChange(e,t){this.orderByFieldName=t,e.order?this.orderby=t+" "+$[e.order]:this.orderby="",this.$refs.table.clearSelection(),this.$nextTick((()=>{this.$refs.udb.loadData()}))},filterChange(e,t){this._filter[t]={type:e.filterType,value:e.filter};let a=k(this._filter,v.command);Object.keys(a).length?this.where=a:this.where="",this.$nextTick((()=>{this.$refs.udb.loadData()}))}}},[["render",function(e,t,a,T,k,v){const D=i,$=y,z=m,j=n(r("download-excel"),S),I=n(r("uni-th"),s),P=n(r("uni-tr"),g),L=n(r("uni-td"),c),E=n(r("uni-dateformat"),x),R=n(r("uni-table"),d),N=n(r("uni-pagination"),F),V=n(r("unicloud-db"),w);return h(),l(D,null,{default:o((()=>[u(D,{class:"uni-header"},{default:o((()=>[u(D,{class:"uni-group"},{default:o((()=>[u(D,{class:"uni-title"}),u(D,{class:"uni-sub-title"})])),_:1}),u(D,{class:"uni-group"},{default:o((()=>[u($,{class:"uni-search",type:"text",modelValue:k.query,"onUpdate:modelValue":t[0]||(t[0]=e=>k.query=e),onConfirm:v.search,placeholder:"请输入搜索内容"},null,8,["modelValue","onConfirm"]),u(z,{class:"uni-button",type:"default",size:"mini",onClick:v.search},{default:o((()=>[f("搜索")])),_:1},8,["onClick"]),u(z,{class:"uni-button",type:"default",size:"mini",onClick:t[1]||(t[1]=e=>v.navigateTo("./add"))},{default:o((()=>[f("新增")])),_:1}),u(z,{class:"uni-button",type:"default",size:"mini",disabled:!k.selectedIndexs.length,onClick:v.delTable},{default:o((()=>[f("批量删除")])),_:1},8,["disabled","onClick"]),u(j,{class:"hide-on-phone",fields:k.exportExcel.fields,data:k.exportExcelData,type:k.exportExcel.type,name:k.exportExcel.filename},{default:o((()=>[u(z,{class:"uni-button",type:"primary",size:"mini"},{default:o((()=>[f("导出 Excel")])),_:1})])),_:1},8,["fields","data","type","name"])])),_:1})])),_:1}),u(D,{class:"uni-container"},{default:o((()=>[u(V,{ref:"udb",collection:k.collectionList,field:"userId,type,category,photos,point,recruitAge,noteTitle,mainText,companyName,payrollForm,salary,salarySupplement,traffic,workTime,workPosition,phone,employeeForm,sex,age,sterOperation,vaccinelnoculation,releaseReason,payMethod,postPrice,status,delete,browse,weight,collect,hightLight,location,location,create_date,update_date",where:k.where,"page-data":"replace",orderby:k.orderby,getcount:!0,"page-size":k.options.pageSize,"page-current":k.options.pageCurrent,options:k.options,loadtime:"manual",onLoad:v.onqueryload},{default:o((({data:e,pagination:a,loading:n,error:r,options:i})=>[u(R,{ref:"table",loading:n,emptyText:r.message||"没有更多数据",border:"",stripe:"",type:"selection",onSelectionChange:v.selectionChange},{default:o((()=>[u(P,null,{default:o((()=>[u(I,{align:"center","filter-type":"search",sortable:"",onSortChange:t[2]||(t[2]=e=>v.sortChange(e,"userId"))},{default:o((()=>[f("发布者")])),_:1}),u(I,{align:"center","filter-type":"search",onFilterChange:t[3]||(t[3]=e=>v.filterChange(e,"type")),sortable:"",onSortChange:t[4]||(t[4]=e=>v.sortChange(e,"type"))},{default:o((()=>[f("类目")])),_:1}),u(I,{align:"center","filter-type":"search",onSortChange:t[5]||(t[5]=e=>v.sortChange(e,"category"))},{default:o((()=>[f("类别")])),_:1}),u(I,{align:"center",onSortChange:t[6]||(t[6]=e=>v.sortChange(e,"photos"))},{default:o((()=>[f("图片")])),_:1}),u(I,{align:"center",sortable:"",onSortChange:t[7]||(t[7]=e=>v.sortChange(e,"point"))},{default:o((()=>[f("地理位置")])),_:1}),u(I,{align:"center",onFilterChange:t[8]||(t[8]=e=>v.filterChange(e,"recruitAge")),onSortChange:t[9]||(t[9]=e=>v.sortChange(e,"recruitAge"))},{default:o((()=>[f("招募年龄")])),_:1}),u(I,{align:"center","filter-type":"search",onFilterChange:t[10]||(t[10]=e=>v.filterChange(e,"noteTitle")),onSortChange:t[11]||(t[11]=e=>v.sortChange(e,"noteTitle"))},{default:o((()=>[f("标题")])),_:1}),u(I,{align:"center","filter-type":"search",onFilterChange:t[12]||(t[12]=e=>v.filterChange(e,"mainText")),onSortChange:t[13]||(t[13]=e=>v.sortChange(e,"mainText"))},{default:o((()=>[f("正文")])),_:1}),u(I,{align:"center","filter-type":"search",onFilterChange:t[14]||(t[14]=e=>v.filterChange(e,"companyName")),onSortChange:t[15]||(t[15]=e=>v.sortChange(e,"companyName"))},{default:o((()=>[f("公司名")])),_:1}),u(I,{align:"center","filter-type":"search",onFilterChange:t[16]||(t[16]=e=>v.filterChange(e,"payrollForm")),onSortChange:t[17]||(t[17]=e=>v.sortChange(e,"payrollForm"))},{default:o((()=>[f("工资形式")])),_:1}),u(I,{align:"center","filter-type":"search",onFilterChange:t[18]||(t[18]=e=>v.filterChange(e,"salary")),sortable:"",onSortChange:t[19]||(t[19]=e=>v.sortChange(e,"salary"))},{default:o((()=>[f("薪资")])),_:1}),u(I,{align:"center","filter-type":"search",onFilterChange:t[20]||(t[20]=e=>v.filterChange(e,"salarySupplement")),sortable:"",onSortChange:t[21]||(t[21]=e=>v.sortChange(e,"salarySupplement"))},{default:o((()=>[f("工资补充")])),_:1}),u(I,{align:"center","filter-type":"search",onFilterChange:t[22]||(t[22]=e=>v.filterChange(e,"traffic")),onSortChange:t[23]||(t[23]=e=>v.sortChange(e,"traffic"))},{default:o((()=>[f("交通")])),_:1}),u(I,{align:"center","filter-type":"search",onFilterChange:t[24]||(t[24]=e=>v.filterChange(e,"workTime")),sortable:"",onSortChange:t[25]||(t[25]=e=>v.sortChange(e,"workTime"))},{default:o((()=>[f("工作时间")])),_:1}),u(I,{align:"center","filter-type":"search",onFilterChange:t[26]||(t[26]=e=>v.filterChange(e,"workPosition")),onSortChange:t[27]||(t[27]=e=>v.sortChange(e,"workPosition"))},{default:o((()=>[f("工作地点")])),_:1}),u(I,{align:"center","filter-type":"search",onFilterChange:t[28]||(t[28]=e=>v.filterChange(e,"phone")),onSortChange:t[29]||(t[29]=e=>v.sortChange(e,"phone"))},{default:o((()=>[f("电话")])),_:1}),u(I,{align:"center","filter-type":"search",onFilterChange:t[30]||(t[30]=e=>v.filterChange(e,"employeeForm")),onSortChange:t[31]||(t[31]=e=>v.sortChange(e,"employeeForm"))},{default:o((()=>[f("雇佣形式")])),_:1}),u(I,{align:"center","filter-type":"search",onFilterChange:t[32]||(t[32]=e=>v.filterChange(e,"sex")),onSortChange:t[33]||(t[33]=e=>v.sortChange(e,"sex"))},{default:o((()=>[f("性别")])),_:1}),u(I,{align:"center","filter-type":"search",onFilterChange:t[34]||(t[34]=e=>v.filterChange(e,"age")),sortable:"",onSortChange:t[35]||(t[35]=e=>v.sortChange(e,"age"))},{default:o((()=>[f("年龄")])),_:1}),u(I,{align:"center","filter-type":"search",onFilterChange:t[36]||(t[36]=e=>v.filterChange(e,"sterOperation")),onSortChange:t[37]||(t[37]=e=>v.sortChange(e,"sterOperation"))},{default:o((()=>[f("绝育手术")])),_:1}),u(I,{align:"center","filter-type":"search",onFilterChange:t[38]||(t[38]=e=>v.filterChange(e,"vaccinelnoculation")),onSortChange:t[39]||(t[39]=e=>v.sortChange(e,"vaccinelnoculation"))},{default:o((()=>[f("疫苗接种")])),_:1}),u(I,{align:"center","filter-type":"search",onFilterChange:t[40]||(t[40]=e=>v.filterChange(e,"releaseReason")),onSortChange:t[41]||(t[41]=e=>v.sortChange(e,"releaseReason"))},{default:o((()=>[f("投稿理由")])),_:1}),u(I,{align:"center","filter-type":"search",onFilterChange:t[42]||(t[42]=e=>v.filterChange(e,"payMethod")),onSortChange:t[43]||(t[43]=e=>v.sortChange(e,"payMethod"))},{default:o((()=>[f("支付方式")])),_:1}),u(I,{align:"center","filter-type":"search",onFilterChange:t[44]||(t[44]=e=>v.filterChange(e,"postPrice")),onSortChange:t[45]||(t[45]=e=>v.sortChange(e,"postPrice"))},{default:o((()=>[f("商品价格")])),_:1}),u(I,{align:"center","filter-type":"search",onFilterChange:t[46]||(t[46]=e=>v.filterChange(e,"status")),sortable:"",onSortChange:t[47]||(t[47]=e=>v.sortChange(e,"status"))},{default:o((()=>[f("帖子状态")])),_:1}),u(I,{align:"center",onFilterChange:t[48]||(t[48]=e=>v.filterChange(e,"delete")),onSortChange:t[49]||(t[49]=e=>v.sortChange(e,"delete"))},{default:o((()=>[f("逻辑删除")])),_:1}),u(I,{align:"center","filter-type":"range",onFilterChange:t[50]||(t[50]=e=>v.filterChange(e,"browse")),sortable:"",onSortChange:t[51]||(t[51]=e=>v.sortChange(e,"browse"))},{default:o((()=>[f("浏览数")])),_:1}),u(I,{align:"center","filter-type":"range",onFilterChange:t[52]||(t[52]=e=>v.filterChange(e,"weight")),sortable:"",onSortChange:t[53]||(t[53]=e=>v.sortChange(e,"weight"))},{default:o((()=>[f("权重")])),_:1}),u(I,{align:"center","filter-type":"range",onFilterChange:t[54]||(t[54]=e=>v.filterChange(e,"collect")),sortable:"",onSortChange:t[55]||(t[55]=e=>v.sortChange(e,"collect"))},{default:o((()=>[f("收藏数")])),_:1}),u(I,{align:"center",onSortChange:t[56]||(t[56]=e=>v.sortChange(e,"hightLight"))},{default:o((()=>[f("高亮")])),_:1}),u(I,{align:"center",onSortChange:t[57]||(t[57]=e=>v.sortChange(e,"location"))},{default:o((()=>[f("地理位置")])),_:1}),u(I,{align:"center","filter-type":"timestamp",onFilterChange:t[58]||(t[58]=e=>v.filterChange(e,"create_date")),sortable:"",onSortChange:t[59]||(t[59]=e=>v.sortChange(e,"create_date"))},{default:o((()=>[f("create_date")])),_:1}),u(I,{align:"center","filter-type":"timestamp",onFilterChange:t[60]||(t[60]=e=>v.filterChange(e,"update_date")),sortable:"",onSortChange:t[61]||(t[61]=e=>v.sortChange(e,"update_date"))},{default:o((()=>[f("update_date")])),_:1}),u(I,{align:"center"},{default:o((()=>[f("操作")])),_:1})])),_:1}),(h(!0),p(_,null,C(e,((e,t)=>(h(),l(P,{key:t},{default:o((()=>[u(L,{align:"center"},{default:o((()=>[f(b(e.userId),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.type),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.category),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.photos),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.point),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.recruitAge),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.noteTitle),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.mainText),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.companyName),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.payrollForm),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.salary),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.salarySupplement),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.traffic),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.workTime),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.workPosition),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.phone),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.employeeForm),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.sex),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.age),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.sterOperation),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.vaccinelnoculation),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.releaseReason),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.payMethod),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.postPrice),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.status),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(1==e.delete?"✅":"❌"),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.browse),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.weight),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.collect),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(1==e.hightLight?"✅":"❌"),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[f(b(e.location),1)])),_:2},1024),u(L,{align:"center"},{default:o((()=>[u(E,{threshold:[0,0],date:e.create_date},null,8,["date"])])),_:2},1024),u(L,{align:"center"},{default:o((()=>[u(E,{threshold:[0,0],date:e.update_date},null,8,["date"])])),_:2},1024),u(L,{align:"center"},{default:o((()=>[u(D,{class:"uni-group"},{default:o((()=>[u(z,{onClick:t=>v.navigateTo("./edit?id="+e._id,!1),class:"uni-button",size:"mini",type:"primary"},{default:o((()=>[f("修改")])),_:2},1032,["onClick"]),u(z,{onClick:t=>v.confirmDelete(e._id,e.photos),class:"uni-button",size:"mini",type:"warn"},{default:o((()=>[f("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1032,["loading","emptyText","onSelectionChange"]),u(D,{class:"uni-pagination-box"},{default:o((()=>[u(N,{"show-icon":"","page-size":a.size,modelValue:a.current,"onUpdate:modelValue":e=>a.current=e,total:a.count,onChange:v.onPageChanged},null,8,["page-size","modelValue","onUpdate:modelValue","total","onChange"])])),_:2},1024)])),_:1},8,["collection","where","orderby","page-size","page-current","options","onLoad"])])),_:1})])),_:1})}]]);export{z as default};
