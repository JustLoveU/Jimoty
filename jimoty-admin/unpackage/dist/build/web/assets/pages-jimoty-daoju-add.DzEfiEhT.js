import{_ as e,Y as a,M as t,N as l,p as o,G as u,s,r as d,a as m,c as r,w as n,am as i,i as f,o as p,g as c,j as _,m as y,Z as j}from"./index-DvwuWHCT.js";import{_ as h}from"./uni-easyinput.CI0qa16L.js";import{_ as b}from"./uni-forms-item.D9H7wr3d.js";import{_ as V}from"./uni-forms.IzwqOl-w.js";import{v as D}from"./jimoty-daoju.BdbPIT4w.js";const U=a.database();U.command;function g(e){let a={};for(let t in D)e.includes(t)&&(a[t]=D[t]);return a}const k=e({data(){let e={daoUserId:"",daojuType:null,daojuNum:0,last_use_date:null,create_date:null};return{formData:e,formOptions:{},rules:{...g(Object.keys(e))}}},onReady(){this.$refs.form.setRules(this.rules)},methods:{submit(){t({mask:!0}),this.$refs.form.validate().then((e=>this.submitForm(e))).catch((()=>{})).finally((()=>{l()}))},submitForm(e){return U.collection("jimoty-daoju").add(e).then((e=>{o({title:"新增成功"}),this.getOpenerEventChannel().emit("refreshData"),setTimeout((()=>u()),500)})).catch((e=>{s({content:e.message||"请求服务失败",showCancel:!1})}))}}},[["render",function(e,a,t,l,o,u){const s=d(m("uni-easyinput"),h),D=d(m("uni-forms-item"),b),U=d(m("uni-datetime-picker"),i),g=y,k=j,T=f,v=d(m("uni-forms"),V);return p(),r(T,{class:"uni-container"},{default:n((()=>[c(v,{ref:"form",model:o.formData,validateTrigger:"bind"},{default:n((()=>[c(D,{name:"daoUserId",label:"道具所属者uid",required:""},{default:n((()=>[c(s,{placeholder:"道具所属者uid，参考 uni-id-users 表",modelValue:o.formData.daoUserId,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.daoUserId=e)},null,8,["modelValue"])])),_:1}),c(D,{name:"daojuType",label:"道具类型",required:""},{default:n((()=>[c(s,{placeholder:"0置顶，1高亮，2刷新,3定期刷新",type:"number",modelValue:o.formData.daojuType,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.daojuType=e)},null,8,["modelValue"])])),_:1}),c(D,{name:"daojuNum",label:"道具数量"},{default:n((()=>[c(s,{placeholder:"道具数量",type:"number",modelValue:o.formData.daojuNum,"onUpdate:modelValue":a[2]||(a[2]=e=>o.formData.daojuNum=e)},null,8,["modelValue"])])),_:1}),c(D,{name:"last_use_date",label:"最后一次使用的时间"},{default:n((()=>[c(U,{"return-type":"timestamp",modelValue:o.formData.last_use_date,"onUpdate:modelValue":a[3]||(a[3]=e=>o.formData.last_use_date=e)},null,8,["modelValue"])])),_:1}),c(D,{name:"create_date",label:"创建道具的时间"},{default:n((()=>[c(U,{"return-type":"timestamp",modelValue:o.formData.create_date,"onUpdate:modelValue":a[4]||(a[4]=e=>o.formData.create_date=e)},null,8,["modelValue"])])),_:1}),c(T,{class:"uni-button-group"},{default:n((()=>[c(g,{type:"primary",class:"uni-button",style:{width:"100px"},onClick:u.submit},{default:n((()=>[_("提交")])),_:1},8,["onClick"]),c(k,{"open-type":"navigateBack",style:{"margin-left":"15px"}},{default:n((()=>[c(g,{class:"uni-button",style:{width:"100px"}},{default:n((()=>[_("返回")])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})}]]);export{k as default};
