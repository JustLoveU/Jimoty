import{_ as e,Y as a,M as t,N as l,p as o,G as u,s as m,r as s,a as r,B as d,c as n,w as i,am as f,i as p,o as c,g as _,j as y,m as V,Z as b}from"./index-DvwuWHCT.js";import{_ as h}from"./uni-easyinput.CI0qa16L.js";import{_ as D}from"./uni-forms-item.D9H7wr3d.js";import{_ as x}from"./uni-data-checkbox.CVdOplTL.js";import{_ as j}from"./uni-forms.IzwqOl-w.js";import{v}from"./jimoty-pay-order.BEx7_JJD.js";import"./uni-load-more.BsuNNNgF.js";const U=a.database();U.command;function g(e){let a={};for(let t in v)e.includes(t)&&(a[t]=v[t]);return a}const k=e({data(){let e={user_id:"",total_fee:null,custom:null,order_no:"",type:"",status:0,create_date:null,pay_date:null};return{formData:e,formOptions:{status_localdata:[{text:"已关闭",value:-1},{text:"未支付",value:0},{text:"已支付",value:1},{text:"已部分退款",value:2},{text:"已全额退款",value:3}]},rules:{...g(Object.keys(e))}}},onReady(){this.$refs.form.setRules(this.rules)},methods:{submit(){t({mask:!0}),this.$refs.form.validate().then((e=>this.submitForm(e))).catch((()=>{})).finally((()=>{l()}))},submitForm(e){return U.collection("jimoty-pay-order").add(e).then((e=>{o({title:"新增成功"}),this.getOpenerEventChannel().emit("refreshData"),setTimeout((()=>u()),500)})).catch((e=>{m({content:e.message||"请求服务失败",showCancel:!1})}))}}},[["render",function(e,a,t,l,o,u){const m=s(r("uni-easyinput"),h),v=s(r("uni-forms-item"),D),U=d("undefined"),g=s(r("uni-data-checkbox"),x),k=s(r("uni-datetime-picker"),f),w=V,C=b,O=p,B=s(r("uni-forms"),j);return c(),n(O,{class:"uni-container"},{default:i((()=>[_(B,{ref:"form",model:o.formData,validateTrigger:"bind"},{default:i((()=>[_(v,{name:"user_id",label:"用户ID"},{default:i((()=>[_(m,{placeholder:"用户id，参考uni-id-users表",modelValue:o.formData.user_id,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.user_id=e)},null,8,["modelValue"])])),_:1}),_(v,{name:"total_fee",label:"订单总金额"},{default:i((()=>[_(m,{placeholder:"订单总金额，单位为分，100等于1元",type:"number",modelValue:o.formData.total_fee,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.total_fee=e)},null,8,["modelValue"])])),_:1}),_(v,{name:"custom",label:"自定义数据"},{default:i((()=>[_(U,{modelValue:o.formData.custom,"onUpdate:modelValue":a[2]||(a[2]=e=>o.formData.custom=e)},null,8,["modelValue"])])),_:1}),_(v,{name:"order_no",label:"业务系统订单号"},{default:i((()=>[_(m,{placeholder:"业务系统订单号，控制在20-28位（不可以是24位,24位在阿里云空间可能会有问题，可重复，代表1个业务订单会有多次付款的情况）",modelValue:o.formData.order_no,"onUpdate:modelValue":a[3]||(a[3]=e=>o.formData.order_no=e),trim:"both"},null,8,["modelValue"])])),_:1}),_(v,{name:"type",label:"订单类型"},{default:i((()=>[_(m,{placeholder:"订单类型 test：订单付款  等等，可自定义",modelValue:o.formData.type,"onUpdate:modelValue":a[4]||(a[4]=e=>o.formData.type=e),trim:"both"},null,8,["modelValue"])])),_:1}),_(v,{name:"status",label:"订单状态"},{default:i((()=>[_(g,{modelValue:o.formData.status,"onUpdate:modelValue":a[5]||(a[5]=e=>o.formData.status=e),localdata:o.formOptions.status_localdata},null,8,["modelValue","localdata"])])),_:1}),_(v,{name:"create_date",label:"创建时间"},{default:i((()=>[_(k,{"return-type":"timestamp",modelValue:o.formData.create_date,"onUpdate:modelValue":a[6]||(a[6]=e=>o.formData.create_date=e)},null,8,["modelValue"])])),_:1}),_(v,{name:"pay_date",label:"支付时间"},{default:i((()=>[_(k,{"return-type":"timestamp",modelValue:o.formData.pay_date,"onUpdate:modelValue":a[7]||(a[7]=e=>o.formData.pay_date=e)},null,8,["modelValue"])])),_:1}),_(O,{class:"uni-button-group"},{default:i((()=>[_(w,{type:"primary",class:"uni-button",style:{width:"100px"},onClick:u.submit},{default:i((()=>[y("提交")])),_:1},8,["onClick"]),_(C,{"open-type":"navigateBack",style:{"margin-left":"15px"}},{default:i((()=>[_(w,{class:"uni-button",style:{width:"100px"}},{default:i((()=>[y("返回")])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})}]]);export{k as default};
