import{_ as e,Y as a,M as l,N as o,p as t,G as m,s as d,r,a as u,c as n,w as s,am as i,i as p,o as f,g as c,j as V,U as h,m as D,Z as y}from"./index-DvwuWHCT.js";import{_ as b}from"./uni-easyinput.CI0qa16L.js";import{_}from"./uni-forms-item.D9H7wr3d.js";import{_ as g}from"./uni-forms.IzwqOl-w.js";import{v as U}from"./jimoty-post.OinjbDkH.js";const w=a.database();w.command;function k(e){let a={};for(let l in U)e.includes(l)&&(a[l]=U[l]);return a}const T=e({data(){let e={userId:"",type:null,category:"",photos:[],point:[],recruitAge:"",noteTitle:"",mainText:"",companyName:"",payrollForm:"",salary:"",salarySupplement:"",traffic:"",workTime:"",workPosition:"",phone:"",employeeForm:"",sex:"",age:"",sterOperation:"",vaccinelnoculation:"",releaseReason:"",payMethod:0,postPrice:"",status:0,delete:1,browse:0,weight:100,collect:0,hightLight:!1,location:null,create_date:null,update_date:null};return{formData:e,formOptions:{},rules:{...k(Object.keys(e))}}},onLoad(e){if(e.id){const a=e.id;this.formDataId=a,this.getDetail(a)}},onReady(){this.$refs.form.setRules(this.rules)},methods:{submit(){l({mask:!0}),this.$refs.form.validate().then((e=>this.submitForm(e))).catch((()=>{})).finally((()=>{o()}))},submitForm(e){return w.collection("jimoty-post").doc(this.formDataId).update(e).then((e=>{t({title:"修改成功"}),this.getOpenerEventChannel().emit("refreshData"),setTimeout((()=>m()),500)})).catch((e=>{d({content:e.message||"请求服务失败",showCancel:!1})}))},getDetail(e){l({mask:!0}),w.collection("jimoty-post").doc(e).field("userId,type,category,photos,point,recruitAge,noteTitle,mainText,companyName,payrollForm,salary,salarySupplement,traffic,workTime,workPosition,phone,employeeForm,sex,age,sterOperation,vaccinelnoculation,releaseReason,payMethod,postPrice,status,delete,browse,weight,collect,hightLight,location,location,create_date,update_date").get().then((e=>{const a=e.result.data[0];a&&(this.formData=a)})).catch((e=>{d({content:e.message||"请求服务失败",showCancel:!1})})).finally((()=>{o()}))}}},[["render",function(e,a,l,o,t,m){const d=r(u("uni-easyinput"),b),U=r(u("uni-forms-item"),_),w=h,k=r(u("uni-datetime-picker"),i),T=D,x=y,F=p,v=r(u("uni-forms"),g);return f(),n(F,{class:"uni-container"},{default:s((()=>[c(v,{ref:"form",model:t.formData,validateTrigger:"bind"},{default:s((()=>[c(U,{name:"userId",label:"发布者",required:""},{default:s((()=>[c(d,{disabled:"",placeholder:"发布者",modelValue:t.formData.userId,"onUpdate:modelValue":a[0]||(a[0]=e=>t.formData.userId=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"type",label:"类目",required:""},{default:s((()=>[c(d,{placeholder:"类目(1社交，2兼职，3教培，4领养，5闲置)",type:"number",modelValue:t.formData.type,"onUpdate:modelValue":a[1]||(a[1]=e=>t.formData.type=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"category",label:"类别"},{default:s((()=>[c(d,{placeholder:"发布者",modelValue:t.formData.category,"onUpdate:modelValue":a[2]||(a[2]=e=>t.formData.category=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"recruitAge",label:"招募年龄"},{default:s((()=>[c(d,{placeholder:"招募年龄",modelValue:t.formData.recruitAge,"onUpdate:modelValue":a[3]||(a[3]=e=>t.formData.recruitAge=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"noteTitle",label:"标题"},{default:s((()=>[c(d,{placeholder:"标题",modelValue:t.formData.noteTitle,"onUpdate:modelValue":a[4]||(a[4]=e=>t.formData.noteTitle=e),trim:"both"},null,8,["modelValue"])])),_:1}),c(U,{name:"mainText",label:"正文"},{default:s((()=>[c(d,{placeholder:"正文",modelValue:t.formData.mainText,"onUpdate:modelValue":a[5]||(a[5]=e=>t.formData.mainText=e),trim:"both"},null,8,["modelValue"])])),_:1}),c(U,{name:"companyName",label:"公司名"},{default:s((()=>[c(d,{placeholder:"公司名",modelValue:t.formData.companyName,"onUpdate:modelValue":a[6]||(a[6]=e=>t.formData.companyName=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"payrollForm",label:"工资形式"},{default:s((()=>[c(d,{placeholder:"工资形式",modelValue:t.formData.payrollForm,"onUpdate:modelValue":a[7]||(a[7]=e=>t.formData.payrollForm=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"salary",label:"薪资"},{default:s((()=>[c(d,{placeholder:"薪资",modelValue:t.formData.salary,"onUpdate:modelValue":a[8]||(a[8]=e=>t.formData.salary=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"salarySupplement",label:"工资补充"},{default:s((()=>[c(d,{placeholder:"工资补充",modelValue:t.formData.salarySupplement,"onUpdate:modelValue":a[9]||(a[9]=e=>t.formData.salarySupplement=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"traffic",label:"交通"},{default:s((()=>[c(d,{placeholder:"交通",modelValue:t.formData.traffic,"onUpdate:modelValue":a[10]||(a[10]=e=>t.formData.traffic=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"workTime",label:"工作时间"},{default:s((()=>[c(d,{placeholder:"工作时间",modelValue:t.formData.workTime,"onUpdate:modelValue":a[11]||(a[11]=e=>t.formData.workTime=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"workPosition",label:"工作地点"},{default:s((()=>[c(d,{placeholder:"工作地点",modelValue:t.formData.workPosition,"onUpdate:modelValue":a[12]||(a[12]=e=>t.formData.workPosition=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"phone",label:"电话"},{default:s((()=>[c(d,{placeholder:"电话",modelValue:t.formData.phone,"onUpdate:modelValue":a[13]||(a[13]=e=>t.formData.phone=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"employeeForm",label:"雇佣形式"},{default:s((()=>[c(d,{placeholder:"雇佣形式",modelValue:t.formData.employeeForm,"onUpdate:modelValue":a[14]||(a[14]=e=>t.formData.employeeForm=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"sex",label:"性别"},{default:s((()=>[c(d,{placeholder:"性别(男,女,不限制)",modelValue:t.formData.sex,"onUpdate:modelValue":a[15]||(a[15]=e=>t.formData.sex=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"age",label:"年龄"},{default:s((()=>[c(d,{placeholder:"年龄（6年7月）",modelValue:t.formData.age,"onUpdate:modelValue":a[16]||(a[16]=e=>t.formData.age=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"sterOperation",label:"绝育手术"},{default:s((()=>[c(d,{placeholder:"绝育手术",modelValue:t.formData.sterOperation,"onUpdate:modelValue":a[17]||(a[17]=e=>t.formData.sterOperation=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"vaccinelnoculation",label:"疫苗接种"},{default:s((()=>[c(d,{placeholder:"疫苗接种",modelValue:t.formData.vaccinelnoculation,"onUpdate:modelValue":a[18]||(a[18]=e=>t.formData.vaccinelnoculation=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"releaseReason",label:"投稿理由"},{default:s((()=>[c(d,{placeholder:"投稿理由",modelValue:t.formData.releaseReason,"onUpdate:modelValue":a[19]||(a[19]=e=>t.formData.releaseReason=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"payMethod",label:"支付方式"},{default:s((()=>[c(d,{placeholder:"支付方式(0线下1线上)",type:"number",modelValue:t.formData.payMethod,"onUpdate:modelValue":a[20]||(a[20]=e=>t.formData.payMethod=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"postPrice",label:"商品价格"},{default:s((()=>[c(d,{placeholder:"商品价格",modelValue:t.formData.postPrice,"onUpdate:modelValue":a[21]||(a[21]=e=>t.formData.postPrice=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"status",label:"帖子状态"},{default:s((()=>[c(d,{placeholder:"帖子状态(0待审核1草稿2审核通过3审核不通过4已结束)",type:"number",modelValue:t.formData.status,"onUpdate:modelValue":a[22]||(a[22]=e=>t.formData.status=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"delete",label:"逻辑删除"},{default:s((()=>[c(d,{placeholder:"逻辑删除(0删除，1未删除)",type:"number",modelValue:t.formData.delete,"onUpdate:modelValue":a[23]||(a[23]=e=>t.formData.delete=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"browse",label:"浏览数"},{default:s((()=>[c(d,{placeholder:"浏览数",type:"number",modelValue:t.formData.browse,"onUpdate:modelValue":a[24]||(a[24]=e=>t.formData.browse=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"weight",label:"权重"},{default:s((()=>[c(d,{placeholder:"权重",type:"number",modelValue:t.formData.weight,"onUpdate:modelValue":a[25]||(a[25]=e=>t.formData.weight=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"collect",label:"收藏数"},{default:s((()=>[c(d,{placeholder:"收藏数",type:"number",modelValue:t.formData.collect,"onUpdate:modelValue":a[26]||(a[26]=e=>t.formData.collect=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"hightLight",label:"高亮"},{default:s((()=>[c(w,{onChange:a[27]||(a[27]=a=>e.binddata("hightLight",a.detail.value)),checked:t.formData.hightLight},null,8,["checked"])])),_:1}),c(U,{name:"location",label:"地理位置"},{default:s((()=>[c(d,{disabled:"",modelValue:t.formData.location.address,"onUpdate:modelValue":a[28]||(a[28]=e=>t.formData.location.address=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"create_date",label:"创建时间"},{default:s((()=>[c(k,{disabled:"","return-type":"timestamp",modelValue:t.formData.create_date,"onUpdate:modelValue":a[29]||(a[29]=e=>t.formData.create_date=e)},null,8,["modelValue"])])),_:1}),c(U,{name:"update_date",label:"更新时间"},{default:s((()=>[c(k,{"return-type":"timestamp",modelValue:t.formData.update_date,"onUpdate:modelValue":a[30]||(a[30]=e=>t.formData.update_date=e)},null,8,["modelValue"])])),_:1}),c(F,{class:"uni-button-group"},{default:s((()=>[c(T,{type:"primary",class:"uni-button",style:{width:"100px"},onClick:m.submit},{default:s((()=>[V("提交")])),_:1},8,["onClick"]),c(x,{"open-type":"navigateBack",style:{"margin-left":"15px"}},{default:s((()=>[c(T,{class:"uni-button",style:{width:"100px"}},{default:s((()=>[V("返回")])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})}]]);export{T as default};
